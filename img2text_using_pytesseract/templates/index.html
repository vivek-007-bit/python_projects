<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Image2Text | Convert image to editable text</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/logo.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Bootstrap" width="30" height="24">
                Image2Text
            </a>
        </div>
    </nav>

    <div class="card text-center mt-4 my-3 mx-auto" style="width: 80%;">
        <form action="/" method="POST" enctype="multipart/form-data">
            <div class="card-body">
                <h5 class="card-title">Upload Image</h5>
                <div>
                    <label for="formFileLg" class="form-label"></label>
                    <input class="form-control form-control-lg" id="formFileLg" type="file" accept="image/*"
                        name="image" required>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Submit</button>
            </div>
        </form>
    </div>

    {% if extracted_text is not none %}
    <div class="card text-center mt-4 my-3 mx-auto" style="width: 80%;">
        <div class="card-body">
            <div>
                <h5 class="card-title">Extracted Text</h5>
                <div class="card-body-right">
                    <span class="badge text-bg-warning">Time: {{ processing_time }} s</span>
                    <button class="btn btn-primary" onclick="copyText()">
                        Copy
                    </button>
                </div>
                
                <div class="mb-3">
                    <label for="exampleFormControlTextarea1" class="form-label"></label>
                    <textarea class="form-control" id="extractedText"
                        rows="8">{{ extracted_text }}</textarea>
                </div>
            </div>
            <p id="message" class="mt-2 text-success"></p>
            <button type="button" class="btn btn-danger ms-auto" onclick="clearText()">
                Clear Text
            </button>
        </div>
        {% endif %}

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>

        <script>
            function clearText() {
                document.getElementById("extractedText").value = "";
            }

            function copyText() {
                const extractedText = document.getElementById("extractedText");
                const message = document.getElementById("message");
            
                navigator.clipboard.writeText(extractedText.value)
                    .then(() => {
                        message.innerText = "Copied to clipboard!";
                    })
                    .catch(err => {
                        message.innerText = "Failed to copy!";
                        console.error(err);
                    });
            }
        </script>
</body>


</html>


